<Page x:Name="page"
      x:Class="spotify.playlist.merger.Views.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:spotify.playlist.merger.Views"
      xmlns:model="using:spotify.playlist.merger.Models"
      xmlns:converters="using:Microsoft.Toolkit.Uwp.UI.Converters"
      xmlns:extensions="using:Microsoft.Toolkit.Uwp.UI.Extensions"
      xmlns:media="using:Microsoft.Toolkit.Uwp.UI.Media"
      xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
      xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
      xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
      xmlns:ToolkitBehaviors="using:Microsoft.Toolkit.Uwp.UI.Animations.Behaviors"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      DataContext="{Binding MainPageInstance, Source={StaticResource Locator}}"
      mc:Ignorable="d"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
      RequestedTheme="Dark">

    <Page.Resources>
        <converters:BoolNegationConverter x:Key="BoolNegationConverter"/>
        <converters:BoolToObjectConverter x:Key="BoolToVisibilityInverseConverter"
                                          TrueValue="Collapsed"
                                          FalseValue="Visible"/>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <converters:EmptyStringToObjectConverter x:Key="EmptyStringToObjectConverter" 
                                                 EmptyValue="Collapsed"
                                                 NotEmptyValue="Visible"/>
        <converters:EmptyStringToObjectConverter x:Key="EmptyStringToObjectInverseConverter" 
                                                 EmptyValue="Visible"
                                                 NotEmptyValue="Collapsed"/>
        <Style x:Key="AutoSuggestBoxTextBoxStyle" TargetType="TextBox">
            <Setter Property="MinWidth" Value="0"/>
            <Setter Property="MinHeight" Value="0"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="Foreground" Value="{ThemeResource TextControlForeground}"/>
            <Setter Property="Background" Value="{ThemeResource InputBoxThemeBrush}"/>
            <Setter Property="SelectionHighlightColor" Value="{ThemeResource BrandColorThemeBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}"/>
            <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}"/>
            <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollMode" Value="Auto"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Hidden"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Hidden"/>
            <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False"/>
            <Setter Property="Padding" Value="{ThemeResource TextControlThemePadding}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Grid>
                            <Grid.Resources>
                                <Style x:Name="DeleteButtonStyle" TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Grid x:Name="ButtonLayoutGrid" Background="{ThemeResource TextControlButtonBackground}" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{ThemeResource TextControlButtonBorderBrush}">
                                                    <VisualStateManager.VisualStateGroups>
                                                        <VisualStateGroup x:Name="CommonStates">
                                                            <VisualState x:Name="Normal"/>
                                                            <VisualState x:Name="PointerOver">
                                                                <Storyboard>
                                                                    <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonLayoutGrid" Storyboard.TargetProperty="Background">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlButtonBackgroundPointerOver}"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonLayoutGrid" Storyboard.TargetProperty="BorderBrush">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlButtonBorderBrushPointerOver}"/>
                                                                    </ObjectAnimationUsingKeyFrames>-->
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="GlyphElement" Storyboard.TargetProperty="Foreground">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource BrandColorThemeBrush}"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                </Storyboard>
                                                            </VisualState>
                                                            <VisualState x:Name="Pressed">
                                                                <Storyboard>
                                                                    <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonLayoutGrid" Storyboard.TargetProperty="Background">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource BrandColorThemeBrush}"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ButtonLayoutGrid" Storyboard.TargetProperty="BorderBrush">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource BrandColorThemeBrush}"/>
                                                                    </ObjectAnimationUsingKeyFrames>-->
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="GlyphElement" Storyboard.TargetProperty="Foreground">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Gray"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                </Storyboard>
                                                            </VisualState>
                                                            <VisualState x:Name="Disabled">
                                                                <Storyboard>
                                                                    <DoubleAnimation Duration="0" Storyboard.TargetName="ButtonLayoutGrid" Storyboard.TargetProperty="Opacity" To="0"/>
                                                                </Storyboard>
                                                            </VisualState>
                                                        </VisualStateGroup>
                                                    </VisualStateManager.VisualStateGroups>
                                                    <TextBlock x:Name="GlyphElement" AutomationProperties.AccessibilityView="Raw" FontStyle="Normal" FontFamily="{ThemeResource SymbolThemeFontFamily}" Foreground="{ThemeResource TextControlButtonForeground}" FontSize="{ThemeResource AutoSuggestBoxIconFontSize}" HorizontalAlignment="Center" Text="&#xE10A;" VerticalAlignment="Center"/>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                                <Style x:Name="QueryButtonStyle" TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <ContentPresenter x:Name="ContentPresenter" AutomationProperties.AccessibilityView="Raw" BackgroundSizing="{TemplateBinding BackgroundSizing}" Background="{ThemeResource TextControlButtonBackground}" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{ThemeResource TextControlButtonBorderBrush}" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentTransitions="{TemplateBinding ContentTransitions}" FontSize="{ThemeResource AutoSuggestBoxIconFontSize}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}">
                                                    <VisualStateManager.VisualStateGroups>
                                                        <VisualStateGroup x:Name="CommonStates">
                                                            <VisualState x:Name="Normal"/>
                                                            <VisualState x:Name="PointerOver">
                                                                <Storyboard>
                                                                    <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Background">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlButtonBackgroundPointerOver}"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="BorderBrush">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlButtonBorderBrushPointerOver}"/>
                                                                    </ObjectAnimationUsingKeyFrames>-->
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource BrandColorThemeBrush}"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                </Storyboard>
                                                            </VisualState>
                                                            <VisualState x:Name="Pressed">
                                                                <Storyboard>
                                                                    <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Background">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource BrandColorThemeBrush}"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="BorderBrush">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource BrandColorThemeBrush}"/>
                                                                    </ObjectAnimationUsingKeyFrames>-->
                                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Foreground">
                                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Gray"/>
                                                                    </ObjectAnimationUsingKeyFrames>
                                                                </Storyboard>
                                                            </VisualState>
                                                            <VisualState x:Name="Disabled">
                                                                <Storyboard>
                                                                    <DoubleAnimation Duration="0" Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Opacity" To="0"/>
                                                                </Storyboard>
                                                            </VisualState>
                                                        </VisualStateGroup>
                                                    </VisualStateManager.VisualStateGroups>
                                                </ContentPresenter>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Grid.Resources>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="HeaderContentPresenter" Storyboard.TargetProperty="Foreground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlHeaderForegroundDisabled}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlBackgroundDisabled}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="BorderBrush">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlBorderBrushDisabled}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentElement" Storyboard.TargetProperty="Foreground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlForegroundDisabled}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="PointerOver">
                                        <Storyboard>
                                            <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="BorderBrush">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource InputBoxHoverThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>-->
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource InputBoxHoverThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentElement" Storyboard.TargetProperty="Foreground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlForegroundPointerOver}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Focused">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="BorderThickness">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="2"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="Background">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlBackgroundFocused}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BorderElement" Storyboard.TargetProperty="BorderBrush">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource BrandColorThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentElement" Storyboard.TargetProperty="Foreground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlForegroundFocused}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentElement" Storyboard.TargetProperty="RequestedTheme">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Light"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="QueryButton" Storyboard.TargetProperty="Foreground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextControlButtonForeground}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="ButtonStates">
                                    <VisualState x:Name="ButtonVisible">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="DeleteButton" Storyboard.TargetProperty="Visibility">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <Visibility>Visible</Visibility>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="ButtonCollapsed"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border x:Name="BorderElement" CornerRadius="10" Background="{TemplateBinding Background}" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" Grid.ColumnSpan="3" Grid.RowSpan="1" Grid.Row="1"/>
                            <ContentPresenter x:Name="HeaderContentPresenter" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" Grid.ColumnSpan="3" FontWeight="Normal" Foreground="{ThemeResource TextControlHeaderForeground}" Margin="{ThemeResource AutoSuggestBoxTopHeaderMargin}" Grid.Row="0" TextWrapping="Wrap" Visibility="Collapsed" x:DeferLoadStrategy="Lazy"/>
                            <ScrollViewer x:Name="ContentElement" CornerRadius="10" AutomationProperties.AccessibilityView="Raw" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}" IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}" IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}" IsTabStop="False" IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}" Margin="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" Grid.Row="1" VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" ZoomMode="Disabled"/>
                            <ContentControl x:Name="PlaceholderTextContentPresenter" Content="{TemplateBinding PlaceholderText}" Grid.ColumnSpan="3" Foreground="{ThemeResource PlaceHolderTextThemeBrush}" IsTabStop="False" IsHitTestVisible="False" Margin="{TemplateBinding BorderThickness}" Padding="32 8 12 0" Grid.Row="1"/>
                            <Button x:Name="DeleteButton" AutomationProperties.AccessibilityView="Raw" BorderThickness="{TemplateBinding BorderThickness}" Grid.Column="1" FontSize="{TemplateBinding FontSize}" IsTabStop="False" MinWidth="34" Grid.Row="1" Style="{StaticResource DeleteButtonStyle}" VerticalAlignment="Stretch" Visibility="Collapsed" Width="{TemplateBinding Height}"/>
                            <Button x:Name="QueryButton" AutomationProperties.AccessibilityView="Raw" BorderThickness="{TemplateBinding BorderThickness}" Grid.Column="2" FontSize="{TemplateBinding FontSize}" IsTabStop="False" MinWidth="34" Grid.Row="1" Style="{StaticResource QueryButtonStyle}" VerticalAlignment="Stretch" Width="{TemplateBinding Height}"/>
                            <ContentPresenter x:Name="DescriptionPresenter" AutomationProperties.AccessibilityView="Raw" Content="{TemplateBinding Description}" Grid.ColumnSpan="3" Foreground="{ThemeResource SystemControlDescriptionTextForegroundBrush}" Grid.Row="2" x:Load="False"/>
                            <FontIcon HorizontalAlignment="Left" Margin="8,0" FontSize="12" Grid.RowSpan="1" Grid.Row="1" FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE721;" Foreground="#ffffff" Opacity=".3"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="AutoSuggestBoxStyle1" TargetType="AutoSuggestBox">
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="IsTabStop" Value="False"/>
            <Setter Property="TextBoxStyle" Value="{StaticResource AutoSuggestBoxTextBoxStyle}"/>
            <Setter Property="UseSystemFocusVisuals" Value="{ThemeResource IsApplicationFocusVisualKindReveal}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="AutoSuggestBox">
                        <Grid x:Name="LayoutRoot">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="Orientation">
                                    <VisualState x:Name="Landscape"/>
                                    <VisualState x:Name="Portrait"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <TextBox x:Name="TextBox" Padding="32 8 12 0" ScrollViewer.BringIntoViewOnFocusChange="False" Description="{TemplateBinding Description}" DesiredCandidateWindowAlignment="BottomEdge" Header="{TemplateBinding Header}" Margin="0" PlaceholderText="{TemplateBinding PlaceholderText}" Style="{TemplateBinding TextBoxStyle}" UseSystemFocusVisuals="{TemplateBinding UseSystemFocusVisuals}" Width="{TemplateBinding Width}" Canvas.ZIndex="0"/>
                            <Popup x:Name="SuggestionsPopup">
                                <Border x:Name="SuggestionsContainer" CornerRadius="10" Margin="0 8 0 0">
                                 
                                    <ListView x:Name="SuggestionsList" Background="Transparent" BorderThickness="{ThemeResource AutoSuggestListBorderThemeThickness}" BorderBrush="{ThemeResource AutoSuggestBoxSuggestionsListBorderBrush}" DisplayMemberPath="{TemplateBinding DisplayMemberPath}" ItemContainerStyle="{TemplateBinding ItemContainerStyle}" ItemTemplate="{TemplateBinding ItemTemplate}" IsItemClickEnabled="True" ItemTemplateSelector="{TemplateBinding ItemTemplateSelector}" MaxHeight="{ThemeResource AutoSuggestListMaxHeight}" Margin="0" Padding="0"/>
                                </Border>
                            </Popup>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ListViewItemContainerStyle1" TargetType="ListViewItem">
            <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}"/>
            <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}"/>
            <Setter Property="Background" Value="{ThemeResource ListViewItemBackground}"/>
            <Setter Property="Foreground" Value="{ThemeResource ListViewItemForeground}"/>
            <Setter Property="TabNavigation" Value="Local"/>
            <Setter Property="IsHoldingEnabled" Value="True"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="0,0,0,0"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="MinWidth" Value="{ThemeResource ListViewItemMinWidth}"/>
            <Setter Property="MinHeight" Value="0"/>
            <Setter Property="AllowDrop" Value="False"/>
            <Setter Property="UseSystemFocusVisuals" Value="{StaticResource UseSystemFocusVisuals}"/>
            <Setter Property="FocusVisualMargin" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListViewItem">
                        <ListViewItemPresenter x:Name="Root" CheckBrush="{ThemeResource ListViewItemCheckBrush}" ContentMargin="{TemplateBinding Padding}" CheckBoxBrush="{ThemeResource ListViewItemCheckBoxBrush}" ContentTransitions="{TemplateBinding ContentTransitions}" CheckMode="{ThemeResource ListViewItemCheckMode}" DragOpacity="{ThemeResource ListViewItemDragThemeOpacity}" DisabledOpacity="{ThemeResource ListViewItemDisabledThemeOpacity}" DragBackground="{ThemeResource ListViewItemDragBackground}" DragForeground="{ThemeResource ListViewItemDragForeground}" FocusBorderBrush="{ThemeResource ListViewItemFocusBorderBrush}" FocusVisualMargin="{TemplateBinding FocusVisualMargin}" FocusSecondaryBorderBrush="{ThemeResource ListViewItemFocusSecondaryBorderBrush}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Control.IsTemplateFocusTarget="True" PressedBackground="{ThemeResource ListViewItemBackgroundPressed}" PlaceholderBackground="{ThemeResource ListViewItemPlaceholderBackground}" PointerOverForeground="{ThemeResource ListViewItemForegroundPointerOver}" PointerOverBackground="{ThemeResource ListViewItemBackgroundPointerOver}" RevealBorderThickness="{ThemeResource ListViewItemRevealBorderThemeThickness}" ReorderHintOffset="{ThemeResource ListViewItemReorderHintThemeOffset}" RevealBorderBrush="{ThemeResource ListViewItemRevealBorderBrush}" RevealBackground="{ThemeResource ListViewItemRevealBackground}" SelectedForeground="{ThemeResource ListViewItemForegroundSelected}" SelectionCheckMarkVisualEnabled="{ThemeResource ListViewItemSelectionCheckMarkVisualEnabled}" SelectedBackground="{ThemeResource ListViewItemBackgroundSelected}" SelectedPressedBackground="{ThemeResource ListViewItemBackgroundSelectedPressed}" SelectedPointerOverBackground="{ThemeResource ListViewItemBackgroundSelectedPointerOver}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="Selected"/>
                                    <VisualState x:Name="PointerOver">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="PointerOver"/>
                                            <Setter Target="Root.RevealBorderBrush" Value="{ThemeResource ListViewItemRevealBorderBrushPointerOver}"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="PointerOverSelected">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="PointerOver"/>
                                            <Setter Target="Root.RevealBorderBrush" Value="{ThemeResource ListViewItemRevealBorderBrushPointerOver}"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="PointerOverPressed">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="Pressed"/>
                                            <Setter Target="Root.RevealBorderBrush" Value="{ThemeResource ListViewItemRevealBorderBrushPressed}"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="Pressed">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="Pressed"/>
                                            <Setter Target="Root.RevealBorderBrush" Value="{ThemeResource ListViewItemRevealBorderBrushPressed}"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                    <VisualState x:Name="PressedSelected">
                                        <VisualState.Setters>
                                            <Setter Target="Root.(RevealBrush.State)" Value="Pressed"/>
                                            <Setter Target="Root.RevealBorderBrush" Value="{ThemeResource ListViewItemRevealBorderBrushPressed}"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="DisabledStates">
                                    <VisualState x:Name="Enabled"/>
                                    <VisualState x:Name="Disabled">
                                        <VisualState.Setters>
                                            <Setter Target="Root.RevealBorderThickness" Value="0"/>
                                        </VisualState.Setters>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                        </ListViewItemPresenter>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="auto"/>
        </Grid.ColumnDefinitions>
        <Grid x:Name="LeftBar"
              Background="#0D0D0D"
              Padding="0,0,0,24"
              Width="64">
            <StackPanel VerticalAlignment="Bottom">
                <Button x:Name="SettingsButton"
                        extensions:Mouse.Cursor="Hand"
                        FontSize="16"
                        Foreground="{ThemeResource SecondaryForeground}"
                        Height="48"
                        HorizontalAlignment="Stretch"
                        Style="{StaticResource TextBlockButtonStyle}">
                    <Button.Flyout>
                        <Flyout Placement="Right">
                            <Flyout.FlyoutPresenterStyle>
                                <Style TargetType="FlyoutPresenter">
                                    <Setter Property="Padding" Value="24, 8"/>
                                    <Setter Property="CornerRadius" Value="12"/>
                                    <Setter Property="Background" Value="#0D0D0D"/>
                                    <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled"/>
                                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
                                    <Setter Property="IsTabStop" Value="True"/>
                                    <Setter Property="TabNavigation" Value="Cycle"/>
                                </Style>
                            </Flyout.FlyoutPresenterStyle>
                            <StackPanel Width="300">
                                <StackPanel Orientation="Horizontal"
                                            Height="44"
                                            Margin="0,0,0,16">
                                    <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE713;" Margin="0,0,12,0" VerticalAlignment="Center" Foreground="{ThemeResource SecondaryThemeBrush}"/>
                                    <TextBlock Text="Settings"
                                               FontSize="16"
                                               FontWeight="SemiBold"
                                               Foreground="{ThemeResource PrimaryForeground}"
                                               VerticalAlignment="Center"/>
                                </StackPanel>
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto"/>
                                        <RowDefinition Height="auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid Margin="0,0,0,16">
                                        <TextBlock Text="ACCOUNT"
                                                   FontSize="11"
                                                   Foreground="{ThemeResource SecondaryForeground}"/>
                                    </Grid>
                                    <Grid Grid.Row="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <Border Background="#242424"
                                                CornerRadius="50"
                                                Margin="0,0,12,0"
                                                Height="48"
                                                Width="48"
                                                VerticalAlignment="Top">
                                            <Image Source="{Binding Profile.Image}"/>
                                        </Border>
                                        <StackPanel Grid.Column="1">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock FontSize="14"
                                                           Text="Logged in as"
                                                           TextTrimming="CharacterEllipsis"
                                                           Foreground="{ThemeResource SecondaryForeground}"
                                                           Margin="0,0,4,0"/>
                                                <TextBlock FontSize="14"
                                                           FontWeight="SemiBold"
                                                           Text="{Binding Profile.Title, FallbackValue=Title}"
                                                           TextTrimming="CharacterEllipsis"
                                                           Foreground="{ThemeResource PrimaryForeground}"
                                                           Margin="0,0,0,8"/>
                                            </StackPanel>
                                            <Button Background="#131313"
                                                    Foreground="{ThemeResource PrimaryForeground}"
                                                    extensions:Mouse.Cursor="Hand"
                                                    Command="{Binding LogoutCommand}"
                                                    Height="28"
                                                    Content="Log out"
                                                    VerticalContentAlignment="Center"
                                                    FontSize="12"
                                                    FontWeight="SemiBold"
                                                    Padding="16, 0"/>
                                        </StackPanel>
                                    </Grid>
                                </Grid>
                                <Line X1="220" Stroke="White" Opacity=".15" StrokeThickness="1" Fill="White" Margin="0,24,0,0"/>
                                <Grid Margin="0,24,0,16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto"/>
                                        <RowDefinition Height="auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid Margin="0,0,0,16">
                                        <TextBlock Text="DEVELOPER"
                                                   FontSize="11"
                                                   Foreground="{ThemeResource SecondaryForeground}"/>
                                    </Grid>
                                    <StackPanel Grid.Row="1">
                                        <TextBox BorderThickness="0"
                                                 CornerRadius="8"
                                                 PlaceholderText="Your Spotify Client ID"
                                                 Margin="0,0,0,8"
                                                 Height="36"
                                                 Padding="12,8"
                                                 Text="{Binding ClientID, Mode=TwoWay}">
                                            <TextBox.Background>
                                                <SolidColorBrush Color="#767680" Opacity=".15"/>
                                            </TextBox.Background>
                                            <TextBox.PlaceholderForeground>
                                                <SolidColorBrush Color="White" Opacity=".2"/>
                                            </TextBox.PlaceholderForeground>
                                        </TextBox>
                                        <TextBox BorderThickness="0"
                                                 CornerRadius="8"
                                                 PlaceholderText="Your Client Spotify Secret"
                                                 Margin="0,0,0,8"
                                                 Height="36"
                                                 Padding="12,8"
                                                 Text="{Binding ClientSecret, Mode=TwoWay}">
                                            <TextBox.Background>
                                                <SolidColorBrush Color="#767680" Opacity=".15"/>
                                            </TextBox.Background>
                                            <TextBox.PlaceholderForeground>
                                                <SolidColorBrush Color="White" Opacity=".2"/>
                                            </TextBox.PlaceholderForeground>
                                        </TextBox>
                                        <Button Content="Save credentials"
                                                Background="#00897b"
                                                Command="{Binding SaveCredentialsCommand}"
                                                extensions:Mouse.Cursor="Hand"
                                                HorizontalAlignment="Stretch"
                                                CornerRadius="8"
                                                Height="36"
                                                Margin="0,0,0,8">

                                        </Button>
                                        <TextBlock TextWrapping="WrapWholeWords" Foreground="{ThemeResource SecondaryForeground}">
                                            <Span xml:space="preserve"><Run>Visit </Run><Hyperlink TextDecorations="None" FontWeight="Medium" NavigateUri="https://developer.spotify.com/documentation/general/guides/app-settings/" Foreground="{ThemeResource BrandColorThemeBrush}">Spotify Developer</Hyperlink><Run> portal in your browser for more help.</Run></Span>
                                        </TextBlock>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Flyout>
                    </Button.Flyout>

                    <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE713;"/>
                </Button>
                <Button x:Name="UserAccountButton"
                        extensions:Mouse.Cursor="Hand"
                        HorizontalContentAlignment="Center"
                        Style="{StaticResource TextBlockButtonStyle}">
                    <Grid Height="48"
                          Width="48">
                        <Border x:Name="UserThumb"
                                Background="#242424"
                                CornerRadius="50"
                                Height="32"
                                Width="32">
                            <Image Source="{Binding Profile.Image}"/>
                        </Border>
                        <Grid Background="#0D0D0D"
                                BorderBrush="#0D0D0D"
                                CornerRadius="50"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Bottom"
                                Margin="4"
                                Padding="2"
                                Height="18"
                                Width="18">
                            <Border Background="White"
                                  CornerRadius="40">
                                <Image Source="/Assets/Spotify_Icon_RGB_Green.png"/>
                            </Border>
                        </Grid>
                    </Grid>
                </Button>
            </StackPanel>
        </Grid>
        <Grid x:Name="Main"
              Grid.Column="1"
              Padding="16,40,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <muxc:ProgressBar Foreground="White"
                              Height="2"
                              Grid.ColumnSpan="100"
                              Grid.RowSpan="100"
                              VerticalAlignment="Top"
                              Margin="0, -16, 16, 0"
                              IsIndeterminate="{Binding IsLoading}" 
                              ShowPaused="False" 
                              ShowError="False" 
                              Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}"/>
            <Grid x:Name="Header"
                  Height="44"
                  Margin="0, 8, 16, 0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="auto" MinWidth="256"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal">
                    <TextBlock x:Name="ContentTitle"
                               FontSize="20"
                               FontWeight="Black"
                               Foreground="{ThemeResource PrimaryForeground}"
                               Text="Playlist Manager"
                               Margin="0,0, 12, 0"
                               VerticalAlignment="Center"/>
                    <ComboBox x:Name="PlaylistCategory"
                              extensions:Mouse.Cursor="Hand"
                              BorderThickness="0"
                              Foreground="{ThemeResource PrimaryForeground}"
                              Margin="0, 0, 12, 0"
                              Padding="12, 0"
                              Width="140"
                              VerticalAlignment="Stretch"
                              PlaceholderText="Default"
                              ItemsSource="{Binding PlaylistCategoryCollection}"
                              SelectedItem="{Binding SelectedPlaylistCategory, Mode=TwoWay}">
                        
                        <ComboBox.ItemTemplate>
                            <DataTemplate x:DataType="model:PlaylistCategory">
                                <TextBlock Text="{Binding Title}"
                                           FontSize="16"
                                           FontWeight="Normal" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <Button x:Name="RefreshPlaylistButton"
                            extensions:Mouse.Cursor="Hand"
                            Command="{Binding RefreshCommand}"
                            Foreground="#FDA500"
                            Width="44"
                            VerticalAlignment="Stretch"
                            VerticalContentAlignment="Center"
                            Style="{StaticResource TextBlockButtonStyle}">
                        <FontIcon Glyph="&#xE895;" FontSize="16"/>
                    </Button>
                </StackPanel>
                <Grid x:Name="SearchPanel"
                      Grid.Column="1"
                      Padding="12,0,0,0">
                    <AutoSuggestBox Name="SearchBar"
                                    PlaceholderText="Search"
                                    Height="36"
                                    Padding="12, 8"
                                    MaxWidth="343"
                                    Text="{Binding SearchText, Mode=TwoWay}"
                                    Style="{StaticResource AutoSuggestBoxStyle1}">
                        
                    </AutoSuggestBox>
                </Grid>
            </Grid>
            <Grid x:Name="ContentMeta"
                  Grid.Row="1"
                  Height="24"
                  Margin="0, 8, 16, 0">
                <StackPanel Orientation="Horizontal" 
                            Visibility="{Binding SearchText, Converter={StaticResource EmptyStringToObjectInverseConverter}}"
                            VerticalAlignment="Center">
                    <FontIcon Glyph="&#xE946;" FontSize="16" Foreground="{ThemeResource SecondaryThemeBrush}" Margin="0,0,8,0"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource SecondaryForeground}"
                               Margin="0,0,4,0"
                               Text="There are"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource PrimaryForeground}"
                               Margin="0,0,2,0"
                               Text="{Binding AdvancedCollectionView.Count, FallbackValue=0}"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource PrimaryForeground}"
                               Margin="0,0,4,0"
                               Text="playlists"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource SecondaryForeground}"
                               Margin="0,0,4,0"
                               Text="with"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource PrimaryForeground}"
                               Margin="0,0,2,0"
                               Text="{Binding TotalTracks, FallbackValue=0}"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource PrimaryForeground}"
                               Margin="0,0,4,0"
                               Text="tracks"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource SecondaryForeground}"
                               Text="in your library."/>
                </StackPanel>
                <StackPanel Orientation="Horizontal"
                            VerticalAlignment="Center"
                            Visibility="{Binding SearchText, Converter={StaticResource EmptyStringToObjectConverter}}">
                    <FontIcon Glyph="&#xE946;" FontSize="16" Foreground="{ThemeResource SecondaryThemeBrush}" Margin="0,0,8,0"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource SecondaryForeground}"
                               Margin="0,0,4,0"
                               Text="Showing"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource PrimaryForeground}"
                               Margin="0,0,2,0"
                               Text="{Binding AdvancedCollectionView.Count, FallbackValue=0}"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource PrimaryForeground}"
                               Margin="0,0,4,0"
                               Text="playlists"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource SecondaryForeground}"
                               Margin="0,0,4,0"
                               Text="with"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource PrimaryForeground}"
                               Margin="0,0,2,0"
                               Text="{Binding TotalTracks, FallbackValue=0}"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource PrimaryForeground}"
                               Margin="0,0,4,0"
                               Text="tracks"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource SecondaryForeground}"
                               Margin="0,0,2,0"
                               Text="for “"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource SecondaryThemeBrush}"
                               Margin="0,0,2,0"
                               Text="{Binding SearchText, FallbackValue=fk}"/>
                    <TextBlock FontSize="14"
                               Foreground="{ThemeResource SecondaryForeground}"
                               Margin="0,0,0,0"
                               Text="”"/>
                </StackPanel>
            </Grid>
            <Grid x:Name="MainContent"
                  Grid.Row="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid x:Name="ContentHeader"
                      Height="56"
                      Margin="0, 8"
                      Padding="0,0,16,0">
                    <Grid Background="#0C0C0C"
                          Height="36"
                          Padding="16,0,0,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid Height="24"
                                  Width="24"
                                  Margin="0,0,16,0">
                                <TextBlock FontSize="16"
                                           Text="#"
                                           Opacity=".7"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center">

                                </TextBlock>
                            </Grid>
                            <Grid Grid.Column="1"
                                  Width="48"
                                  Margin="0,0,24,0"/>
                            <Grid Grid.Column="2" 
                                              Margin="0,0,12,0"
                                              VerticalAlignment="Center">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>
                                <TextBlock x:Name="Title"
                                           FontSize="12"
                                           FontWeight="SemiBold"
                                           Text="TITLE / OWNER"
                                           Opacity=".3"
                                           TextTrimming="CharacterEllipsis"/>
                            </Grid>
                        </Grid>
                    </Grid>
                </Grid>
                <Grid x:Name="Content" Grid.Row="1">
                    <ListView x:Name="ContentView"
                              Padding="0,0,16,0"
                              IsItemClickEnabled="True"
                              model:ItemClickCommand.Command="{Binding PlaylistItemClickCommand}"
                              SelectionMode="None"
                              ItemsSource="{Binding AdvancedCollectionView}"
                              ItemContainerStyle="{StaticResource ListViewItemContainerStyle1}">
                      
                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="model:Playlist">
                                <Grid Height="64" Opacity=".9"
                                      Background="Transparent"
                                      extensions:Mouse.Cursor="Hand">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Interactivity:Interaction.Behaviors>
                                       <ToolkitBehaviors:Fade x:Name="ContainerOpacityIn" Duration="250" Delay="0" AutomaticallyStart="False" Value="1" EasingMode="EaseOut" EasingType="Linear" />
                                        <ToolkitBehaviors:Fade x:Name="ContainerOpacityOut" Duration="250" Delay="0" AutomaticallyStart="False" Value=".9" EasingMode="EaseOut" EasingType="Linear" />

                                        <Core:EventTriggerBehavior EventName="PointerEntered">
                                            <Core:CallMethodAction TargetObject="{Binding ElementName=ContainerOpacityIn}" MethodName="StartAnimation"/>
                                            <Core:CallMethodAction TargetObject="{Binding ElementName=ContentViewPlayBtnFadeIn}" MethodName="StartAnimation"/>
                                            <Core:CallMethodAction TargetObject="{Binding ElementName=ContentViewCountFadeIn}" MethodName="StartAnimation"/>
                                        <Core:CallMethodAction TargetObject="{Binding ElementName=ContentViewCountOffsetIn}" MethodName="StartAnimation"/>
                                        </Core:EventTriggerBehavior>
                                        <Core:EventTriggerBehavior EventName="PointerExited">
                                            <Core:CallMethodAction TargetObject="{Binding ElementName=ContainerOpacityOut}" MethodName="StartAnimation"/>
                                            <Core:CallMethodAction TargetObject="{Binding ElementName=ContentViewPlayBtnFadeOut}" MethodName="StartAnimation"/>
                                            <Core:CallMethodAction TargetObject="{Binding ElementName=ContentViewCountFadeOut}" MethodName="StartAnimation"/>
                                            <Core:CallMethodAction TargetObject="{Binding ElementName=ContentViewCountOffsetOut}" MethodName="StartAnimation"/>
                                        </Core:EventTriggerBehavior>
                                    </Interactivity:Interaction.Behaviors>
                                    <Grid x:Name="SelectedBackground"
                                          Background="{ThemeResource ListViewItemBackgroundSelected}"
                                          Grid.ColumnSpan="100"
                                          Grid.RowSpan="100"
                                          Visibility="{Binding IsSelected, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                    <Grid Margin="16,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto"/>
                                            <ColumnDefinition Width="auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid Height="24"
                                              Width="24"
                                              Margin="0,0,16,0">
                                            <TextBlock FontSize="16"
                                                       Text="{Binding IndexA}"
                                                       Foreground="{ThemeResource PrimaryForeground}"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center">
                                                
                                            </TextBlock>
                                        </Grid>
                                        <Grid x:Name="Thumbnail"
                                              Grid.Column="1"
                                              Background="#111111"
                                              Height="48"
                                              Width="48"
                                              Margin="0,0,24,0">
                                            <Image Source="{Binding Image}"/>
                                            <Button Style="{StaticResource TextBlockButtonStyle}"
                                                    CommandParameter="{Binding}"
                                                    Command="{Binding DataContext.PlayItemCommand, ElementName=page}"
                                                    Foreground="WhiteSmoke"
                                                    Height="48"
                                                    Width="48"
                                                    Opacity="0"
                                                    Padding="0"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Stretch">
                                                <Button.Background>
                                                    <media:AcrylicBrush BackgroundSource="Backdrop"
                                                                        TintColor="#000000"
                                                                        TintOpacity="0.30"
                                                                        BlurAmount="2" 
                                                                        FallbackColor="#000000"/>
                                                </Button.Background>
                                                <Interactivity:Interaction.Behaviors>
                                                    <ToolkitBehaviors:Fade x:Name="ContentViewPlayBtnFadeIn" Duration="250" Delay="0" AutomaticallyStart="False" Value="1" EasingMode="EaseOut" EasingType="Linear" />
                                                    <ToolkitBehaviors:Fade x:Name="ContentViewPlayBtnFadeOut" Duration="250" Delay="0" AutomaticallyStart="False" Value="0" EasingMode="EaseOut" EasingType="Linear" />
                                                </Interactivity:Interaction.Behaviors>
                                                <FontIcon Glyph="&#xE102;"/>
                                            </Button>
                                        </Grid>
                                        <Grid Grid.Column="2" 
                                              Margin="0,0,12,0"
                                              VerticalAlignment="Center">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="auto"/>
                                                <RowDefinition Height="auto"/>
                                            </Grid.RowDefinitions>
                                            <TextBlock x:Name="Title"
                                                       FontSize="16"
                                                       FontWeight="Bold"
                                                       Text="{Binding Title, FallbackValue=Title}"
                                                       TextTrimming="CharacterEllipsis"
                                                       Foreground="{ThemeResource PrimaryForeground}"
                                                       Margin="0,0,0,2"/>
                                            <StackPanel Grid.Row="1"
                                                        Orientation="Horizontal">
                                                <TextBlock FontSize="16"
                                                           Foreground="{ThemeResource SecondaryForeground}"
                                                           Text="By"
                                                           Margin="0,0,4,0"/>
                                                <TextBlock x:Name="Owner"
                                                           FontSize="16"
                                                           Foreground="{ThemeResource SecondaryForeground}"
                                                           Text="{Binding Owner.Title, FallbackValue=Owner}"
                                                           TextTrimming="CharacterEllipsis"/>
                                                <StackPanel Orientation="Horizontal"
                                                            Margin="8 2 0 0"
                                                            Opacity="0"
                                                            VerticalAlignment="Center">
                                                    <Interactivity:Interaction.Behaviors>
                                                        <ToolkitBehaviors:Fade x:Name="ContentViewCountFadeIn" Duration="250" Delay="0" AutomaticallyStart="False" Value="1" EasingMode="EaseOut" EasingType="Linear" />
                                                        <ToolkitBehaviors:Fade x:Name="ContentViewCountFadeOut" Duration="250" Delay="0" AutomaticallyStart="False" Value="0" EasingMode="EaseOut" EasingType="Linear" />
                                                        <ToolkitBehaviors:Offset x:Name="ContentViewCountOffsetIn" Duration="400" Delay="0" AutomaticallyStart="False" OffsetX="0" OffsetY="0" EasingMode="EaseOut" EasingType="Cubic" />
                                                        <ToolkitBehaviors:Offset x:Name="ContentViewCountOffsetOut" Duration="400" Delay="0" AutomaticallyStart="False" OffsetX="12" OffsetY="0" EasingMode="EaseOut" EasingType="Cubic" />
                                                    </Interactivity:Interaction.Behaviors>
                                                    <FontIcon Glyph="&#xEC4F;" 
                                                              FontSize="12" 
                                                              Foreground="{ThemeResource SecondaryForeground}"
                                                              Margin="0 0 2 0"/>
                                                    <TextBlock FontSize="14"
                                                               Margin="0,0,4,0"
                                                               Foreground="{ThemeResource SecondaryForeground}"
                                                               Text="{Binding Count, FallbackValue=0}"
                                                               TextTrimming="CharacterEllipsis"/>
                                                    <TextBlock FontSize="14"
                                                               Margin="0,0,4,0"
                                                               Foreground="{ThemeResource SecondaryForeground}"
                                                               Text="songs"
                                                               TextTrimming="CharacterEllipsis"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Grid>
                                    </Grid>
                                    <Button x:Name="ToggleSelectionButton"
                                            Grid.Column="1"
                                            extensions:Mouse.Cursor="Hand"
                                            CommandParameter="{Binding}"
                                            Command="{Binding ElementName=page, Path=DataContext.ToggleSelectedPlaylistCommand}"
                                            Margin="64,0,8,0"
                                            VerticalAlignment="Stretch"
                                            Width="64"
                                            Style="{StaticResource TextBlockButtonStyle}">
                                        <Grid Height="24"
                                              Width="24">
                                            <Grid x:Name="Selected"
                                                  BorderThickness="1"
                                                  CornerRadius="24"
                                                  Visibility="{Binding IsSelected, Converter={StaticResource BoolToVisibilityConverter}}">
                                                <Grid.Background>
                                                    <SolidColorBrush Color="White" Opacity=".9"/>
                                                </Grid.Background>
                                                <FontIcon Glyph="&#xE73E;" FontSize="16" Foreground="Black"/>
                                            </Grid>
                                            <Grid x:Name="NotSelected"
                                                  BorderThickness="2"
                                                  CornerRadius="24"
                                                  Visibility="{Binding IsSelected, Converter={StaticResource BoolToVisibilityInverseConverter}, FallbackValue=collapsed}">
                                                <Grid.BorderBrush>
                                                    <SolidColorBrush Color="White" Opacity=".1"/>
                                                </Grid.BorderBrush>
                                            
                                            </Grid>
                                        </Grid>
                                    </Button>
                                    <Button x:Name="PlaylistOptions"
                                            extensions:Mouse.Cursor="Hand"
                                            Grid.Column="2"
                                            Foreground="{ThemeResource SecondaryForeground}"
                                            HorizontalContentAlignment="Center"
                                            VerticalAlignment="Stretch"
                                            Width="48"
                                            Style="{StaticResource TextBlockButtonStyle}">
                                        <Button.Flyout>
                                            <MenuFlyout>
                                                <MenuFlyout.MenuFlyoutPresenterStyle>
                                                    <Style TargetType="MenuFlyoutPresenter">
                                                        <Setter Property="CornerRadius" Value="10"/>
                                                        <Setter Property="Background" Value="#0D0D0D"/>
                                                        <Setter Property="BorderThickness" Value="0"/>
                                                        <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled"/>
                                                        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
                                                    </Style>
                                                </MenuFlyout.MenuFlyoutPresenterStyle>
                                                <MenuFlyoutItem Text="Play"
                                                                Command="{Binding DataContext.PlayItemCommand, ElementName=page}" 
                                                                CommandParameter="{Binding}">
                                                    <MenuFlyoutItem.Icon>
                                                        <FontIcon Glyph="&#xE102;"/>
                                                    </MenuFlyoutItem.Icon>
                                                </MenuFlyoutItem>
                                                <MenuFlyoutItem Text="Edit"
                                                                Command="{Binding DataContext.ShowEditPlaylistDialogCommand, ElementName=page}" 
                                                                CommandParameter="{Binding}"
                                                                Visibility="{Binding CanModify, Converter={StaticResource BoolToVisibilityConverter}}">
                                                    <MenuFlyoutItem.Icon>
                                                        <FontIcon Glyph="&#xE104;"/>
                                                    </MenuFlyoutItem.Icon>
                                                </MenuFlyoutItem>
                                                <MenuFlyoutItem Text="Clone"
                                                                Command="{Binding DataContext.ShowCloneDialogCommand, ElementName=page}" 
                                                                CommandParameter="{Binding}">
                                                    <MenuFlyoutItem.Icon>
                                                        <FontIcon Glyph="&#xE8AF;"/>
                                                    </MenuFlyoutItem.Icon>
                                                </MenuFlyoutItem>
                                                <MenuFlyoutItem Text="Unfollow" 
                                                                CommandParameter="{Binding}" 
                                                                Command="{Binding DataContext.UnfollowPlaylistCommand, ElementName=page}">
                                                    <MenuFlyoutItem.Icon>
                                                        <FontIcon Glyph="&#xE10A;"/>
                                                    </MenuFlyoutItem.Icon>
                                                </MenuFlyoutItem>
                                            </MenuFlyout>
                                        </Button.Flyout>
                                        <FontIcon Glyph="&#xE712;" FontSize="16"/>
                                    </Button>
                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </Grid>
            </Grid>
        </Grid>
        <Grid x:Name="RightBar"
              Grid.Column="2"
              Background="#0C0C0C"
              Padding="16, 40, 16, 16"
              Width="390">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <Grid x:Name="RightBarHeader"
                  Margin="0, 8">
                <Grid Height="44">
                    <TextBlock Text="SELECTED PLAYLISTS"
                               FontWeight="SemiBold"
                               FontSize="14"
                               Style="{StaticResource SubtitleTextBlockStyle}"
                               Margin="32 0 0 0"
                               VerticalAlignment="Center"/>
                    <FontIcon Glyph="&#xE762;" FontSize="16" HorizontalAlignment="Left" Margin="4 2 0 0"/>
                </Grid>
            </Grid>
            <Grid x:Name="RightBarContent"
                  Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid Height="44"
                      Margin="0,0,0,8">
                    <Grid Height="36"
                          Background="#131313"
                          CornerRadius="12"
                          Padding="16, 0 8 0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Orientation="Horizontal"
                                    VerticalAlignment="Center">
                            <TextBlock Text="{Binding SelectedPlaylistCollection.Count, FallbackValue=0}"
                                       FontSize="14"
                                       Margin="0,0,4,0"/>
                            <TextBlock Text="Selected items"
                                       FontSize="14"
                                       Foreground="{ThemeResource PrimaryForeground}"
                                       Margin="0,0,16,0"/>
                        </StackPanel>
                        <Button x:Name="ClearSelectedButton2"
                                Grid.Column="1"
                                extensions:Mouse.Cursor="Hand"
                                Command="{Binding ClearSelectedCommand}"
                                Foreground="#FDA500"
                                Height="40" Opacity=".87"
                                Content="Clear"
                                FontWeight="SemiBold"
                                Padding="16,0"
                                Style="{StaticResource TextBlockButtonStyle}">

                        </Button>
                    </Grid>
                </Grid>
                <ListView x:Name="SelectedContentView"
                          Grid.Row="1"
                          SelectionMode="None"
                          IsItemClickEnabled="True"
                          ItemsSource="{Binding SelectedPlaylistCollection}"
                          ItemContainerStyle="{StaticResource ListViewItemContainerStyle1}">
            
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="model:Playlist">
                            <Grid Height="56"
                                  Background="Transparent"
                                  extensions:Mouse.Cursor="Hand"
                                  Padding="8,0,8,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="auto"/>
                                </Grid.ColumnDefinitions>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="PointerEntered">
                                        <Core:CallMethodAction TargetObject="{Binding ElementName=SelectedContentViewPlayBtnFadeIn}" MethodName="StartAnimation"/>
                                    </Core:EventTriggerBehavior>
                                    <Core:EventTriggerBehavior EventName="PointerExited">
                                        <Core:CallMethodAction TargetObject="{Binding ElementName=SelectedContentViewPlayBtnFadeOut}" MethodName="StartAnimation"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid Height="24"
                                          Width="24"
                                          Margin="0,0,12,0">
                                        <TextBlock FontSize="14"
                                                   Text="{Binding IndexB, FallbackValue=0}"
                                                   Foreground="{ThemeResource PrimaryForeground}"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center">

                                        </TextBlock>
                                    </Grid>
                                    <Grid x:Name="Thumbnail"
                                              Grid.Column="1"
                                              Background="#111111"
                                              Height="40"
                                              Width="40"
                                              Margin="0,0,12,0">
                                        <Image Source="{Binding Image}"/>
                                        <Button Style="{StaticResource TextBlockButtonStyle}"
                                                CommandParameter="{Binding}"
                                                Command="{Binding DataContext.PlayItemCommand, ElementName=page}"
                                                Foreground="WhiteSmoke"
                                                Height="40"
                                                Width="40"
                                                Opacity="0"
                                                Padding="0"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Stretch">
                                            <Button.Background>
                                                <media:AcrylicBrush BackgroundSource="Backdrop"
                                                                    TintColor="#000000"
                                                                    TintOpacity="0.30"
                                                                    BlurAmount="2" 
                                                                    FallbackColor="#000000"/>
                                            </Button.Background>
                                            <Interactivity:Interaction.Behaviors>
                                                <ToolkitBehaviors:Fade x:Name="SelectedContentViewPlayBtnFadeIn" Duration="250" Delay="0" AutomaticallyStart="False" Value="1" EasingMode="EaseOut" EasingType="Linear" />
                                                <ToolkitBehaviors:Fade x:Name="SelectedContentViewPlayBtnFadeOut" Duration="250" Delay="0" AutomaticallyStart="False" Value="0" EasingMode="EaseOut" EasingType="Linear" />
                                            </Interactivity:Interaction.Behaviors>
                                            <FontIcon Glyph="&#xE102;"/>
                                        </Button>
                                    </Grid>
                                    <Grid Grid.Column="2" 
                                              Margin="0,0,16,0"
                                              VerticalAlignment="Center">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto"/>
                                            <RowDefinition Height="auto"/>
                                        </Grid.RowDefinitions>
                                        <TextBlock x:Name="Title"
                                                   FontSize="14"
                                                   FontWeight="SemiBold"
                                                   Foreground="{ThemeResource PrimaryForeground}"
                                                   Text="{Binding Title, FallbackValue=Title}"
                                                   TextTrimming="CharacterEllipsis"
                                                   TextWrapping="NoWrap"
                                                   Margin="0,0,0,0"/>
                                        <StackPanel Grid.Row="1"
                                                        Orientation="Horizontal">
                                            <TextBlock FontSize="14"
                                                       Foreground="{ThemeResource SecondaryForeground}"
                                                           Text="By"
                                                           Margin="0,0,4,0"/>
                                            <TextBlock x:Name="Owner"
                                                           FontSize="14"
                                                       Foreground="{ThemeResource SecondaryForeground}"
                                                           Text="{Binding Owner.Title, FallbackValue=Owner}"
                                                           TextTrimming="CharacterEllipsis"/>
                                        </StackPanel>
                                    </Grid>
                                </Grid>
                                <Grid Grid.Column="1">
                                    <Button x:Name="RemoveSelectedButton"
                                            VerticalAlignment="Stretch"
                                            Padding="16,0"
                                            Foreground="{ThemeResource SecondaryForeground}"
                                            Command="{Binding ElementName=page, Path=DataContext.UnselectPlaylistCommand}" 
                                            CommandParameter="{Binding}"
                                            Style="{StaticResource TextBlockButtonStyle}">
                                        <FontIcon Glyph="&#xE10A;" FontSize="16"/>
                                    </Button>
                                </Grid>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid>
            <Grid x:Name="RightBarActions"
                  Grid.Row="2"
                  Height="32"
                  Margin="0 8 0 12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Button x:Name="MergeButton"
                        extensions:Mouse.Cursor="Hand"
                        CornerRadius="10"
                        IsEnabled="{Binding CanMerge}"
                        Command="{Binding ShowMergeDialogCommand}"
                        BorderThickness="1.5"
                        Background="{x:Null}"
                        FontSize="14"
                        Foreground="{ThemeResource SecondaryForeground}"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Padding="0"
                        Margin="0,0,4,0">
                    <Button.BorderBrush>
                        <SolidColorBrush Color="White" Opacity=".1"/>
                    </Button.BorderBrush>
                    <TextBlock Text="Merge" Margin="0 0 0 2"/>
                </Button>
                <Button x:Name="PlayButton"
                        extensions:Mouse.Cursor="Hand"
                        Grid.Column="1"
                        Background="#121212"
                        Foreground="{ThemeResource PrimaryForeground}"
                        Command="{Binding PlaySelectedCommand}"
                        CornerRadius="10"
                        IsEnabled="{Binding CanPlay}"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Margin="4,0,4,0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Play"/>
                    </StackPanel>
                </Button>
                <Button x:Name="UnfollowButton"
                        extensions:Mouse.Cursor="Hand"
                        Grid.Column="2"
                        BorderThickness="1.5"
                        BorderBrush="{ThemeResource DangerThemeBrush}"
                        Background="{x:Null}"
                        Foreground="{ThemeResource SecondaryForeground}"
                        Command="{Binding UnfollowSelectedCommand}"
                        CornerRadius="10"
                        IsEnabled="{Binding CanPlay}"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Margin="4,0,0,0">
                    <TextBlock Text="Unfollow"/>
                </Button>
            </Grid>
            <Grid x:Name="RightBarLoading"
                  Grid.RowSpan="100"
                  Margin="-16, -40, -16, -16"
                  Visibility="{Binding IsRightBarBusy, Converter={StaticResource BoolToVisibilityConverter}}">
                <Grid.Background>
                    <media:AcrylicBrush
                      BackgroundSource="Backdrop"
                      TintColor="#010101"
                      TintOpacity="0.70"
                      BlurAmount="12"/>

                </Grid.Background>
                <muxc:ProgressRing IsActive="{Binding IsRightBarBusy}" 
                                   Height="40" Width="40"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Foreground="WhiteSmoke"/>
            </Grid>
        </Grid>
        <Grid Height="32" 
              VerticalAlignment="Top" 
              Grid.RowSpan="100"
              Grid.ColumnSpan="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="32"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid x:Name="DragGrid" Background="Transparent" Grid.Column="1">
                <!--<TextBlock Text="Spotify companion" Margin="8,8,0,0" />-->

            </Grid>
        </Grid>
        <Grid x:Name="LoginView"
              Grid.ColumnSpan="100"
              Grid.RowSpan="100"
              Visibility="{Binding ShowLogin, Converter={StaticResource BoolToVisibilityConverter}}">
            <Grid.Background>
                <media:AcrylicBrush
                      BackgroundSource="Backdrop"
                      TintColor="#010101"
                      TintOpacity="0.75"
                      BlurAmount="12"/>
            </Grid.Background>
            <StackPanel MaxWidth="300" VerticalAlignment="Center">
                <Image Source="/Assets/undraw_Imagination_re_i0xi 1.png" Stretch="Uniform" Margin="0 0 0 24" Width="200"/>
                <TextBlock Text="Connect the app with your Spotify account to continue." 
                           FontSize="24" 
                           FontFamily="Segoe UI"
                           TextAlignment="Center"
                           HorizontalAlignment="Left"
                           TextWrapping="WrapWholeWords"/>
                    <Button RequestedTheme="Dark" 
                            Background="White"
                            Margin="0 24" 
                            FontSize="18"
                            Foreground="#010101"
                            HorizontalAlignment="Center"
                            Command="{Binding ConnectSpotifyCommand}"
                            Padding="16 0 24 0" 
                            CornerRadius="18" 
                            Height="48"
                            Width="250"
                        IsEnabled="{Binding IsLoading, Converter={StaticResource BoolNegationConverter}}">
                    <StackPanel Orientation="Horizontal">
                        <Image Height="24" 
                               VerticalAlignment="Center"
                               Margin="0 0 12 0"
                               Source="/Assets/Spotify_Icon_RGB_Green.png"/>
                        <TextBlock Text="Connect Spotify"
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>
            </StackPanel>


            <ProgressBar Grid.ColumnSpan="100"
                     IsIndeterminate="{Binding IsLoading}"
                     Foreground="White" 
                         Margin="36"
                     VerticalAlignment="Top"
                     Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}"/>

        </Grid>
        <Grid x:Name="DialogBackdrop"
              Grid.ColumnSpan="100"
              Grid.RowSpan="100"
              Visibility="{Binding IsDialogOpen, Converter={StaticResource BoolToVisibilityConverter}}">
            <Grid.Background>
                <media:AcrylicBrush BackgroundSource="Backdrop"
                                    TintColor="#000000"
                                    TintOpacity="0.70"
                                    BlurAmount="5" 
                                    FallbackColor="#000000"/>
            </Grid.Background>
        </Grid>
    </Grid>
</Page>
